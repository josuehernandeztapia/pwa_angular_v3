:host {
  display: block;
}

.skip-link {
  position: absolute;
  top: -48px;
  left: var(--space-4);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-lg);
  background: var(--color-text-primary);
  color: var(--color-bg-primary);
  font-size: var(--text-sm);
  text-decoration: none;
  z-index: var(--z-tooltip);
  transition: top var(--duration-200) var(--ease-out);

  &:focus {
    top: var(--space-4);
  }
}

.integraciones {
  min-height: 100vh;
  background: var(--color-bg-secondary-light, #f8fafc);

  @media (prefers-color-scheme: dark) {
    background: var(--color-bg-primary-inverted, #020617);
  }

  &__header {
    background: var(--color-bg-primary);
    border-bottom: 1px solid var(--color-border-secondary);
  }

  &__header-bar {
    max-width: 1120px;
    margin: 0 auto;
    padding: var(--space-5) var(--space-6);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-4);
    flex-wrap: wrap;
  }

  &__heading {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  &__heading-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--space-6);
    height: var(--space-6);
    border-radius: var(--radius-lg);
    background: var(--color-bg-secondary);
    color: var(--color-text-secondary);
    --icon-color: currentColor;

    app-icon {
      color: currentColor;
    }

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #1e293b);
      color: var(--color-text-secondary-dark, #94a3b8);
    }
  }

  &__main-title {
    margin: 0;
    font-size: var(--text-2xl);
    font-weight: var(--font-semibold);
    color: var(--color-text-primary);

    @media (prefers-color-scheme: dark) {
      color: var(--color-text-primary-inverted, #f8fafc);
    }
  }

  &__subtitle {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    @media (prefers-color-scheme: dark) {
      color: var(--color-text-secondary-dark, #94a3b8);
    }
  }

  &__header-meta {
    font-size: var(--text-xs);
    color: var(--color-text-secondary);

    @media (prefers-color-scheme: dark) {
      color: var(--color-text-secondary-dark, #94a3b8);
    }
  }

  &__main {
    max-width: 1120px;
    margin: 0 auto;
    padding: var(--space-8) var(--space-6) var(--space-10);
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
  }

  &__section {
    padding: var(--space-6);
    display: flex;
    flex-direction: column;
    gap: var(--space-5);
  }

  &__section-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
  }

  &__section-title {
    margin: 0;
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--color-text-primary);
  }

  &__stats-grid {
    display: grid;
    gap: var(--space-4);

    @media (min-width: 768px) {
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
  }

  &__stat-card {
    padding: var(--space-4);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border-secondary);
    background: var(--color-bg-primary);

    &--neutral {
      background: var(--color-bg-secondary, #f1f5f9);
    }

    &--success {
      background: var(--color-bg-success-light, #ecfdf5);
      border-color: var(--color-border-success, #10b981);
    }

    &--error {
      background: var(--color-bg-error-light, #fee2e2);
      border-color: var(--color-border-error, #dc2626);
    }

    &--info {
      background: var(--color-bg-info-light, #eff6ff);
      border-color: var(--color-border-info, #3b82f6);
    }

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #1e293b);
      border-color: var(--color-border-secondary-dark, #475569);

      &--neutral {
        background: var(--color-bg-secondary-dark, #1e293b);
      }

      &--success {
        background: var(--color-surface-success-subtle, rgba(16, 185, 129, 0.12));
      }

      &--error {
        background: var(--color-surface-error-subtle, rgba(220, 38, 38, 0.12));
      }

      &--info {
        background: var(--color-surface-info-subtle, rgba(59, 130, 246, 0.12));
      }
    }
  }

  &__stat-number {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--color-text-primary);
  }

  &__stat-label {
    margin: 0;
    font-size: var(--text-xs);
    color: var(--color-text-secondary);
  }

  &__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  &__integration-card {
    border: 1px solid var(--color-border-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    background: var(--color-bg-primary);
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    transition: background var(--duration-150) var(--ease-out);

    &:hover {
      background: var(--color-bg-secondary);
    }

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #1e293b);
      border-color: var(--color-border-secondary-dark, #475569);

      &:hover {
        background: var(--color-surface-primary-alpha, rgba(30, 41, 59, 0.5));
      }
    }
  }

  &__integration-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  &__integration-heading {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  &__integration-title {
    margin: 0;
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--color-text-primary);
  }

  &__integration-actions {
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }

  &__status-indicator {
    width: var(--space-3);
    height: var(--space-3);
    border-radius: 50%;
    background: var(--color-bg-secondary, #f1f5f9);

    &--active {
      background: var(--color-bg-success, #10b981);
    }

    &--testing {
      background: var(--color-bg-warning, #f59e0b);
    }

    &--error {
      background: var(--color-bg-error, #dc2626);
    }

    &--inactive {
      background: var(--color-bg-disabled, #9ca3af);
    }
  }

  &__type-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    background: var(--color-bg-secondary, #f1f5f9);
    color: var(--color-text-secondary, #64748b);

    &--api {
      background: var(--color-bg-info-light, #eff6ff);
      color: var(--color-text-info, #2563eb);
    }

    &--webhook {
      background: var(--color-bg-secondary, #f8fafc);
    }

    &--sync {
      background: var(--color-bg-warning-light, #fef3c7);
      color: var(--color-text-warning, #b45309);
    }

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #475569);
      color: var(--color-text-secondary-dark, #94a3b8);

      &--api {
        background: var(--color-surface-info-subtle-light, rgba(59, 130, 246, 0.16));
        color: var(--color-text-info-light, #60a5fa);
      }

      &--webhook {
        background: var(--color-surface-neutral-subtle, rgba(148, 163, 184, 0.16));
      }

      &--sync {
        background: var(--color-surface-warning-subtle, rgba(217, 119, 6, 0.16));
        color: var(--color-text-warning-light, #fbbf24);
      }
    }
  }

  &__integration-details {
    display: grid;
    gap: var(--space-3);

    @media (min-width: 768px) {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
  }

  &__detail-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  &__detail-label {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  &__primary-text {
    color: var(--color-text-primary);

    @media (prefers-color-scheme: dark) {
      color: var(--color-text-primary-inverted, #f8fafc);
    }
  }

  &__secondary-text {
    color: var(--color-text-secondary);

    @media (prefers-color-scheme: dark) {
      color: var(--color-text-secondary-dark, #94a3b8);
    }
  }

  &__metric {
    font-weight: var(--font-medium);

    &--success {
      color: var(--color-text-success, #059669);
    }

    &--error {
      color: var(--color-text-error, #dc2626);
    }
  }

  &__endpoint {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    padding-top: var(--space-3);
    border-top: 1px solid var(--color-border-secondary);
  }

  &__code-block {
    display: inline-block;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    background: var(--color-bg-secondary, #f1f5f9);
    color: var(--color-text-secondary, #64748b);
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    font-size: var(--text-xs);
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;

    &--scroll {
      display: block;
      max-height: 200px;
      overflow: auto;
    }

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #1e293b);
      color: var(--color-text-secondary-dark, #94a3b8);
    }
  }

  &__filters {
    display: flex;
    align-items: flex-end;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  &__filter {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  &__filter-label {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--color-text-secondary);
  }

  &__select {
    min-width: 200px;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border-secondary);
    background: var(--color-bg-primary);
    color: var(--color-text-primary);
    font-size: var(--text-sm);

    &:focus {
      outline: none;
      border-color: var(--color-border-focus);
      box-shadow: var(--shadow-focus-primary);
    }

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-primary-inverted, #0f172a);
      border-color: var(--color-border-secondary-dark, #475569);
      color: var(--color-text-primary-inverted, #f8fafc);
    }
  }

  &__skeleton-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  &__skeleton-item {
    height: 64px;
    border-radius: var(--radius-lg);
    background: var(--color-bg-skeleton, #e2e8f0);
    animation: pulse 1.6s ease-in-out infinite;

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-skeleton-dark, #475569);
    }
  }

  &__logs-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  &__log-entry {
    border: 1px solid var(--color-border-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
    background: var(--color-bg-secondary-light, #f8fafc);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #1e293b);
      border-color: var(--color-border-secondary-dark, #475569);
    }
  }

  &__log-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  &__log-meta {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  &__log-context {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: var(--text-xs);
    color: var(--color-text-secondary);
  }

  &__log-status {
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    background: var(--color-bg-secondary, #f1f5f9);
    color: var(--color-text-secondary, #64748b);

    &--success {
      background: var(--color-bg-success-light, #ecfdf5);
      color: var(--color-text-success, #059669);
    }

    &--warning {
      background: var(--color-bg-warning-light, #fef3c7);
      color: var(--color-text-warning, #b45309);
    }

    &--error {
      background: var(--color-bg-error-light, #fee2e2);
      color: var(--color-text-error, #dc2626);
    }

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #475569);
      color: var(--color-text-secondary-dark, #94a3b8);
    }
  }

  &__method-badge {
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    background: var(--color-bg-secondary, #e2e8f0);
    color: var(--color-text-secondary, #64748b);
    font-size: var(--text-xs);
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;

    @media (prefers-color-scheme: dark) {
      background: var(--color-bg-secondary-dark, #475569);
      color: var(--color-text-secondary-dark, #94a3b8);
    }
  }

  &__log-endpoint {
    font-size: var(--text-xs);
    color: var(--color-text-secondary);
  }

  &__log-details {
    display: grid;
    gap: var(--space-3);

    @media (min-width: 768px) {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  &__log-payload {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  &__view-more-button {
    align-self: flex-start;
    padding: var(--space-1) 0;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--color-text-info, #2563eb);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color var(--duration-150) var(--ease-out);

    &:hover {
      color: var(--color-text-info-hover, #1d4ed8);
    }

    @media (prefers-color-scheme: dark) {
      color: var(--color-text-info-light, #60a5fa);
    }
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}
