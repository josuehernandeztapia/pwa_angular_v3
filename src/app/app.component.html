<!-- Skip Link for Accessibility -->
<a class="skip-link" href="#main-content">Saltar al contenido</a>

<div class="app-shell">
  <!-- Sidebar Navigation -->
  <aside class="app-shell__sidebar">
    <div class="app-shell__sidebar-header">Conductores</div>

    <nav class="app-shell__nav" role="navigation" aria-label="Navegación principal">
      <div class="app-shell__nav-section">
        <div class="app-shell__nav-label">Crear</div>
        <div class="app-shell__nav-links">
          <a routerLink="/chat" class="app-shell__nav-link" data-cy="nav-chat">
            <app-icon name="chat"></app-icon>
            <span>Chat</span>
          </a>
          <a routerLink="/audio" class="app-shell__nav-link" data-cy="nav-audio">
            <app-icon name="microphone"></app-icon>
            <span>Audio</span>
          </a>
          <a routerLink="/images" class="app-shell__nav-link" data-cy="nav-images">
            <app-icon name="image"></app-icon>
            <span>Images</span>
          </a>
          <a routerLink="/assistants" class="app-shell__nav-link" data-cy="nav-assistants">
            <app-icon name="assistants"></app-icon>
            <span>Assistants</span>
          </a>
        </div>
      </div>

      <div class="app-shell__nav-section">
        <div class="app-shell__nav-label">Gestionar</div>
        <div class="app-shell__nav-links">
          <a routerLink="/usage" class="app-shell__nav-link" data-cy="nav-usage">
            <app-icon name="usage"></app-icon>
            <span>Usage</span>
          </a>
          <a routerLink="/cotizador" class="app-shell__nav-link" data-cy="nav-cotizador">
            <app-icon name="calculator"></app-icon>
            <span>Cotizador</span>
          </a>
          <a routerLink="/simulador" class="app-shell__nav-link" data-cy="nav-simulador">
            <app-icon name="simulator"></app-icon>
            <span>Simulador</span>
          </a>
          <a routerLink="/documentos" class="app-shell__nav-link" data-cy="nav-documentos">
            <app-icon name="document"></app-icon>
            <span>Documentos</span>
          </a>
          <a routerLink="/entregas" class="app-shell__nav-link" data-cy="nav-entregas">
            <app-icon name="truck"></app-icon>
            <span>Entregas</span>
          </a>
        </div>
      </div>

      <div class="app-shell__nav-section">
        <div class="app-shell__nav-label">Optimizar</div>
        <div class="app-shell__nav-links">
          <a routerLink="/avi" class="app-shell__nav-link" data-cy="nav-avi">
            <app-icon name="microphone"></app-icon>
            <span>AVI</span>
          </a>
          <a routerLink="/proteccion" class="app-shell__nav-link" data-cy="nav-proteccion">
            <app-icon name="shield"></app-icon>
            <span>Protección</span>
          </a>
        </div>
      </div>
    </nav>
  </aside>

  <!-- Main Content Area -->
  <div class="app-shell__main">
    <header class="app-shell__topbar">
      <div class="app-shell__topbar-info">
        Organización: <span data-cy="org-name">mvpcoductores</span>
      </div>

      <div class="app-shell__topbar-actions">
        <button class="btn btn-primary btn-sm" data-cy="export">Exportar</button>
        <button class="btn btn-secondary btn-sm" data-cy="date-range">Rango de fechas</button>
        <button
          class="btn btn-ghost btn-sm"
          (click)="toggleDarkMode()"
          data-cy="toggle-dark"
          [attr.aria-label]="isDarkMode ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'">
          <app-icon name="moon" *ngIf="!isDarkMode"></app-icon>
          <app-icon name="sun" *ngIf="isDarkMode"></app-icon>
        </button>
      </div>
    </header>

    <main id="main-content" class="app-shell__content" role="main">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<!-- Mobile Bottom Navigation -->
<app-bottom-nav-bar
  class="app-shell__mobile-nav"
  role="navigation"
  aria-label="Navegación móvil">
</app-bottom-nav-bar>

<!-- Update Banner for PWA updates -->
<app-update-banner></app-update-banner>

<!-- Offline Status Indicator -->
<app-offline-indicator></app-offline-indicator>

<!-- PWA Install Prompt -->
<app-pwa-install-prompt></app-pwa-install-prompt>
